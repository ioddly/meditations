{% extends "base.htm" %}

{% block title %}Journal{% endblock %}

{% block navigation %}
  <div>
    <form class="form-inline float-xs-right">
      <div class="form-group">
        <input class="form-control" id="journal-new-entry-date" type=text placeholder="New entry on specific date" >
      </div>
      <span id="saved-button" class="navbar-btn btn btn-sm octicon octicon-check" title=saved></span>
    </form>
  </div>
{% endblock %}

{% block content %}
<div class=row>
  <div class=col-md-2 id=journal-nav>
    <ul class="nav nav-tabs" role=tablist>
      <li class=nav-item>
        <a class=active data-toggle=tab href="#chronological" role=tab><span class="octicon octicon-clock"></span>&nbsp;Time&nbsp;</a>
      </li>
      <li class=nav-item>
        <a data-toggle=tab href="#alphabetical" role=tab><span class="octicon octicon-text-size"></span>&nbsp;Title&nbsp;</a>
      </li>
      <li class=nav-item>
        <a data-toggle=tab href="#tag" role=tab><span class="octicon octicon-tag">&nbsp;Tag&nbsp;</span></a>
      </li>
    </ul>

    <div class=tab-content>
      <!-- Chronological navigation links -->
      <div class="tab-pane active" id=chronological role=tabpanel>
        <ul class="list-group navigation-list">
          {% for year in Years %}
          <li><a href="#chrono-nav-{{year.Date}}" data-toggle="collapse" aria-expanded=false aria-controls="chrono-nav-{{year.Date}}">{{year.Date}} ({{year.Count}})</a>
            <ul id="chrono-nav-{{year.Date}}" class="list-group navigation-list collapse">
              {% for month in year.Sub %}
              <li><a href="#view/{{month.Link}}">{{month.Date}} ({{month.Count}})</a></li>
              {% endfor %}
            </ul>
          </li>
          {% endfor %}
        </ul>
      </div>

      <!-- Alphabetical navigation links -->
      <div class="tab-pane" id=alphabetical role=tabpanel>
        <!-- TODO: Entries with colons in name should turn into openable lists e.g. Reviews: -->
        <ul id=alphabetical-top-list class="list-group navigation-list">
          {% for link in NameLinks %}
            {% if link.Sub %}
            <li><span class="octicon octicon-chevron-right"></span><a href="#alpha-nav-{{link.Id}}" data-toggle=collapse aria-expanded=false aria-controls="alpha-nav-{{link.Id}}">{{link.Name}}</a>
            <ul id="alpha-nav-{{link.Id}}" class="list-group navigation-list collapse">
              {% for link in link.Sub %}
              <li><a href="#name/{{link.Href}}">{{link.Name}}</a></li>
              {% endfor %}
            </ul>

            </li>
              
            {% else %}
              <li><a href="#name/{{link.Href}}">{{link.Name}}</a></li>
            {% endif %}
          {% endfor %}
        </ul>
        <title-nav></title-nav>
      </div>

      <!-- Tagged navigation links -->
      <div class=tab-pane id=tag role=tabpanel>
        <ul class="list-group navigation-list">
          {% for link in TagLinks %}
          <li><a href="#tag/{{link.Name}}">#{{link.Name}}</a> ({{link.Count}})</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>

  <div class=col-md-10 id=journal-ui>
  </div>
</div>
{% endblock %}

{% block script %}

{% if Config.Webpack %}
  <script src="/assets/webpack-bundle-journal.js"></script>
{% else %}
  <script src="/assets/journal.js"></script>
  <script type=riot/tag src="/assets/journal-tag.tag"></script>

  <script type="text/javascript">
  $(document).ready(function() {
    var name_links = [
      {% for link in NameLinks %}
      { name: "{{link.Name}}", id: "{{link.Id}}" },
      {% endfor %}
    ];
    window.Journal.main(name_links, {% if Config.Tutorial %}true{% else %}false{% endif %});
  });
  </script>
{% endif %}

{% endblock %}
